{
  "AppName": "borg",
  "ClientScp": "scp",
  "ClientSsh": "ssh",
  "Powershell": "pwsh",
  "openssl": "openssl",
  "ClientOpenssl": "E:\\Program Files\\OpenSSL-Win64\\v1.0.2p\\bin\\openssl.exe",
  "ClientEnv": {
    "OPENSSL_CONF": "E:\\Program Files\\OpenSSL-Win64\\v1.0.2p\\bin\\openssl.cfg"
  },
  "HostName": "192.168.33.110",
  "UserName": "root",
  "IdentityFile": "D:/cygwin64/home/admin/.ssh/id_rsa",
  "PublicKeyFile": "default|none",
  "PrivateKeyFile": "/root/.ssh/id_rsa",
  "ServerPassword": null,
  "BorgBin": "/usr/local/bin/borg",
  "BorgCreate": "{0} create --stats --json {1}::{2} /etc /usr/local/bin",
  "BorgPrune": "{0} prune -v --list --keep-daily=7 --keep-weekly=4 {1}",
  "BorgList": "{0} list --json {1}",
  "BorgRepoPath": "/opt/repo",
  "LocalDir": "e:/backups/borg",
  "BorgPrunePattern": "0 3 0 3 0 0 0",
  "DumpPrunePattern": "0 3 0 3 0 0 0",
  "OsType": "centos",
  "LogDir": "e:/backups/logs",
  "taskcmd" : {
    "archive": "{0}borg-client-side.ps1 -Action NewArchive -ConfigFile {1} -LogResult -CopyScripts -Json",
    "prune": "{0}borg-client-side.ps1 -Action Prune -ConfigFile {1} -LogResult -CopyScripts -Json",
    "download": "{0}borg-client-side.ps1 -Action DownloadRepo -ConfigFile {1} -LogResult -CopyScripts -Json"
  },
  "SwitchByOs": {
    "centos": {
      "Softwares": [
        {
          "PackageUrl": "https://github.com/borgbackup/borg/releases/download/1.1.7/borg-linux64",
          "LocalName": null,
          "InstallDetect": {
            "command": "yum list installed | Where-Object {$_ -match 'mysql57-community-release.noarch'}",
            "expect": "aru",
            "unexpect": ""
          },
          "Install": {
            "command": "yum --nogpgcheck -y localinstall {filepath}"
          }
        }
      ],
      "ServerSide": {
        "UninstallCommand": "yum remove -y (Invoke-Expression -Command '& yum list installed' | ForEach-Object {$_ -split '\\s+' | Select-Object -First 1 }| Where-Object {$PSItem -like '*mysql*server.x86_64'})",
        "ScriptDir": "/tmp/easyinstaller-scripts/borg",
        "PackageDir": "/tmp/easyinstaller-scripts/packages",
        "EntryPoint": "borg-server-side.ps1",
        "Software": {
          "InstallDetect": {
            "command": "systemctl status mysqld",
            "expect": "",
            "unexpect": "not-found"
          }
        }
      }
    }
  }
}
